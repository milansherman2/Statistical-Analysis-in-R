# Statistical-Analysis-in-R
Exploring predictive metrics in  baseball

  <h2>Languages Used</h2>

- <b>R</b> 
- <b>R Markdown</b>

<h2>Introduction</h2>
<p> Using data to increase a sports team’s odds of winning has become standard in professional sports over the last 20 years. In the early 2000s, the Oakland A’s were early adopters, or even inventors of this approach to assembling a competitive baseball team as chronicled in the book (and movie) Moneyball (2011). While the strategy is not new, I am interested in identifying baseball metrics that are predictive of winning. Given the amount of money that is generated by professional sports, the ability to gain a competitive edge via data is crucial. In the current context, the ubiquity of leveraging data in sports has perhaps changes this approach from one of opportunity to a necessity in order to not lose ground on competitors </p>
  
  <h2>Research Questions</h2>
<p>My research question evolved and came into focus as I became more familiar with my datasets. I found that the datasets that I’d chosen were best suited to generating offensive metrics, and that offensive metrics are generally related more to runs scored than winning or losing in the research that I’d done. I did not want to lose sight of winning or losing, but decided to first relate my metrics to runs scored as it makes sense that these metrics would be much more predictive of runs scored.</p>

In the end, I focused in the following research questions:
- What batting metrics are most highly correlated with runs scored? 
- Which metrics are most predictive of winning or losing?

<h2>Data</h2>  

Below are the datasets that I used for this analysis:  
- MLB Batting Stats by Game 1901-2021: https://www.kaggle.com/datasets/darinhawley/mlb-batting-stats-by-game-19012021  
- Moneyball: https://www.kaggle.com/datasets/wduckett/moneyball-mlb-stats-19622012  
- MLB Game Logs (1871-2016): https://data.world/dataquest/mlb-game-logs

<h2>Method</h2>
<p>At the beginning of my project, I had identified batting average, on-base percentage, and slugging percentage as important offensive metrics to explore, but during my research I stumbled upon a lesser known metric with a lot of promise: base-out percentage. The inclusion of this metric made the analysis particularly interesting, as in theory it seemed to capture all of the important information needed to predict runs. The opportunity to determine the predictive power of relatively unknown metric was exciting.</p>

Each of these metrics is defined as follows:
- Batting Average: the proportion of at-bats that result in a hit. Walks are not considered an at-bat, and therefore are removed from consideration in this metric.
- Slugging Percentage: a weighted batting average, weighting each hit according to the number of bases it nets.
- On-base Percentage: the proportion of plate appearances that resulted in the hitter getting on base
- Base-out Percentage: the ratio of bases a player nets by any means (hits, walks, stolen bases, etc.) to the number of outs they generate by any means (ground out, fly out, caught stealing, etc.)


My approach was to generate these metrics by team by game for the two datasets that are not aggregated, and use them to predict runs scored and/or winning or losing. These datasets needed to be cleaned and transformed in order to generate these metrics at that level. This was a time consuming step, as it required an in-depth understanding of what data was contained in the dataset in order to transform it into the above metrics. The third dataset was already aggregated by team by season. That step done, the analysis was focused on the following steps:


1.	Understanding the relationship between each of these metrics and runs scored within each of the datasets via scatterplots and Pearson’s correlation coefficient
2.	Creating a simple linear regression model using runs scored and each of these hitting metrics
3.	Creating a simple linear regression model using number of wins in a season and each of these hitting metrics. This analysis was only possible with the third dataset that was aggregated by team by season, as it contained the relevant hitting metrics as well as the number of wins for the season.

<h2>Results</h2>
<b>MLB Batting Stats by Game 1901-2021</b>

Relationship between Batting Metrics and Runs Scored

Metric | Correlation | R^2 | Slope |
| --- | :---: | :---: | :---: |
Batting Average | 0.731 | 0.53 | 28.46 |
Slugging Percentage | 0.764 | 0.58 | 16.13 |
On-base Percentage | 0.745 | 0.56 | 27.53 |
Base-out Percentage | 0.834 | 0.70 | 9.15 |

<b>MLB Game Logs 1871-2016</b>

Relationship between Batting Metrics and Runs Scored

Metric | Correlation | R^2 | Slope |
| --- | :---: | :---: | :---: |
Batting Average | 0.731 | 0.53 | 28.79 |
Slugging Percentage | 0.758 | 0.58 | 16.30 |
On-base Percentage | 0.745 | 0.56 | 27.83 |
Base-out Percentage | 0.836 | 0.70 | 9.32 |


<b>MoneyBall Dataset</b>

Relationship between Batting Metrics and Runs Scored

Metric | Correlation | R^2 | Slope |
| --- | :---: | :---: | :---: |
Batting Average | 0.827 | 0.68 | 5864.84 |
Slugging Percentage | 0.919 | 0.84 | 2527.92 |
On-base Percentage | 0.900 | 0.81 | 5490.39 |

Relationship between Batting Metrics and Wins

Metric | Correlation | R^2 | Slope |
| --- | :---: | :---: | :---: |
Batting Average | 0.409 | 0.17 | 362.83 |
Slugging Percentage | 0.401 | 0.16 | 138.29 |
On-base Percentage | 0.482 | 0.23 | 367.75 |


<h2>Interpretation</h2>
<p> Each of these metrics is a significant predictor of runs scored, with a p-value of 0 for each. The slopes given by the linear models need a bit of interpretation. At face value, for example, the slope for batting average indicates that for every increase in batting average of 1, the number of runs scored is expected to increase by over 28. In most baseball games, neither team scores more than 10 runs, and in many games it’s less than 5. The issue is that in most baseball games a team’s batting average is between 0 and .4, and cannot be greater than 1. Thus, it would make more sense to interpret the slope as an increase of 2.8 runs for every 0.1 increase in batting average. A similar interpretation can be applied to each of the metrics.  Furthermore, the difference between these slope also needs interpretation. These differences are relative to the range of values for the metric. For example, batting average ranges from 0 to just above 0.6, while base-out percentage ranges from 0 to over 3. Thus, an increase of 1 in each of these metrics will impact the number of runs scored differently.</p>

<p>As the intercept for all four models is negative, which is not possible, it does not make sense to try to interpret it. It is difficult by not impossible to score a run without getting hit, and thus we would expect the intercept to be just above 0 for batting average and slugging percentage. It is not possible to score a run without getting on base, and thus on-base percentage and base-out percentage should theoretically have an intercept of 0. Nonetheless, the models for each of these metrics include a small, negative intercept.</p>


